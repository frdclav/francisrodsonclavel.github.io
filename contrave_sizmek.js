// inbanner: 2.7.0 : Test UD-2299
try{var tm_log=function(){for(a=0;a<arguments.length;a++){console.log("TubeMogul: "+arguments[a])}};var a,img,trusteAdded=false,viewabilityDisabled=false,iasPixelUrl="",moatPixelUrl="";if(typeof(TM_array)=="undefined"){var TM_array=[]}var uIdx=Math.random()+Date.now().valueOf();TM_array[uIdx]={Args:{}};TM_array[uIdx].Args.data=[{"preview":true,"pt":"","session":{"host":"rtb-cache01.tubemogul.com","sessId":"preview"},"bi":"","closeButtonDelay":5,"adPluginURL":"http://playtime.tubemogul.com/prod/html_direct/release/tmunit-17e179.js","adParts":[{"sequence":1,"assets":[{"clickURL":null,"description":null,"encodingRate":500,"mimeType":"video/x-flv","trackAsAutoplay":"F","type":"promoted_video","align":null,"showDuration":null,"layer":"0","timer":null,"parentAssetID":null,"id":10226596,"height":"480","loops":null,"inplayCall":"bannerClicks","videoDuration":null,"delay":null,"framework":"vpaid","timerPos":null,"pvId":"rdl0WcoKGRMYWe2ypMIX","width":"320","preserveAspectRatio":"T","x":"0","y":"0","detail":null,"autoPlay":"F","showControls":"T","resourceType":"static"},{"clickURL":null,"description":null,"encodingRate":null,"mimeType":"text/html","trackAsAutoplay":null,"type":"display_code","align":null,"showDuration":null,"layer":null,"timer":null,"parentAssetID":null,"id":10226597,"height":null,"loops":null,"inplayCall":null,"videoDuration":null,"delay":null,"timerPos":null,"width":null,"preserveAspectRatio":null,"x":null,"y":null,"detail":"<script src=\"mraid.js\"></script>\n\n<style type=\"text/css\">\n\n    body {\n        background: #7e5d79 ;\n        padding: 0;\n        margin: 0;\n        font-family:  \"Helvetica\", \"Helvetica Regular\", \"HelveticaNeue-Light\", \"Helvetica Neue Light\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n        font-weight: 300;\n        overflow-x: hidden;\n    }\n\n    #wrapper_close {\n        position: absolute;\n        top:0;\n        right:0;\n        float:right;\n        display: none;\n        padding: 5px;\n    }\n\n    #ad_container_wrapper {\n         width: 100%;\n         height: 100%;\n         position: absolute;\n         background: #7e5d79 ;\n         text-align: center;\n         overflow-y: hidden;\n         overflow-x: hidden;\n        display: flex;\n        flex-direction: column;\n     }\n\n    #video_container {\n        position: relative;\n        width: 100%;\n        height: auto;\n        top: 1%;\n        left: 0px;\n        background-color: #000000;\n        float:left;\n    }\n\n    #callToActionDivcallToActionDiv{\n        margin-left: auto;\n        margin-right: auto;\n        width: 40%;\n    }\n\n    .cta {\n        position: absolute;\n        bottom: 15%;\n        width: 100%;\n        height: 40px;\n        cursor: pointer;\n        position: absolute;\n        text-align: left;\n    }\n\n    #page1_video_status {\n        position: absolute;\n        left: 0px;\n        width: 100%;\n        height: 16px;\n        background-color: #252525;\n        z-index: 1;\n        bottom: -9%;\n        display:block;\n    }\n    .video_status_text {\n        color: #FFFFFF;\n        font-family: Helvetica, Arial, sans-serif;\n        font-size: 11px;\n        font-style: normal;\n        line-height: 16px;\n        width: 100%;\n    }\n    #page1_video_status_text {\n        text-align: left;\n        float: left;\n        padding-left: 7px;\n    }\n    \n    #logo img {\n        width: 100%;\n    }\n\n    ::-webkit-scrollbar-track {\n        background-color: #c6c6c6;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background-color: #ff6525;\n    }\n\n    ::-webkit-scrollbar-button {\n        background-color: #ff6525;\n    }\n\n    ::-webkit-scrollbar-corner {\n        background-color: #c6c6c6;\n    }\n\n    ::-webkit-scrollbar {\n        width: 4%;\n        background-color: #c6c6c6;\n    }\n\n    ::-webkit-scrollbar-button {\n        background-size: 100%;\n        height: 30px;\n        width: 20px;\n    }\n\n    ::-webkit-scrollbar-button:start:increment,\n    ::-webkit-scrollbar-button:end:decrement {\n        display: none;\n    }\n\n    ::-webkit-scrollbar-button:start { display: block; }\n\n    ::-webkit-scrollbar-button:end { display: block; }\n\n    ::-webkit-scrollbar-button:vertical:increment {\n        /*background-image: url(https://ct.tubemogul.com/web/contrave_1H_2017_Q1_pho_extender/03/images/arrow-down.png);*/\n        background-color: #ff6525;\n        background-position: center center;\n        display: none;\n    }\n\n    ::-webkit-scrollbar-button:vertical:decrement {\n        /*background-image: url(https://ct.tubemogul.com/web/contrave_1H_2017_Q1_pho_extender/03/images/arrow-up.png);*/\n        background-color: #ff6525;\n        background-position: center center;\n        display: none;\n\n    }\n\n    .container {\n        width: 100%;\n        /*height: 100%;*/\n        background-color: #ffffff;\n        overflow-y: scroll; /* showing scrollbars */\n        overflow-x: hidden; /* showing scrollbars */\n        bottom:0;\n        position: relative;\n        text-align: left;\n        flex-grow: 1;\n        margin-top: 7%;\n    }\n\n    .container p {\n        padding: .5em .5em .5em 1em;\n        margin-top: -1em;\n        font-size: 1em;\n    }\n\n    .container h3 {\n        font-weight: bold;\n        color: #000000;\n        margin-bottom: -.5em;\n        padding: 0.75em;\n        font-size: 1.2em;\n    }\n\n    img#description {\n        vertical-align: top;\n        padding: 1%;\n        margin-right: auto;\n        margin-left: auto;\n    }\n\n    #logo img#learnmore  {\n        width: 15%;\n        height: auto;\n    }\n\n    #learnmore {\n        position: absolute;\n    }\n\n\n    @-webkit-keyframes fadeIn {\n        from {\n            opacity: 0;\n        }\n        to {\n            opacity: 1;\n        }\n    }\n\n    @-moz-keyframes fadeIn {\n        from {\n            opacity: 0;\n        }\n        to {\n            opacity: 1;\n        }\n    }\n\n    @keyframes fadeIn {\n        from {\n            opacity: 0;\n        }\n        to {\n            opacity: 1;\n        }\n    }\n\n    @-webkit-keyframes slideIn {\n        from {\n            left: -300px;\n        }\n        to {\n            left: 0;\n        }\n    }\n\n    @-moz-keyframes slideIn {\n        from {\n            left: -300px;\n        }\n        to {\n            left: 0;\n        }\n    }\n\n    @keyframes slideIn {\n        from {\n            left: -300px;\n        }\n        to {\n            left: 0;\n        }\n    }\n\n    .slide-in {\n        left: -300px;\n\n        /*opacity:0;  !* make things invisible upon start *!*/\n        -webkit-animation:slideIn ease-in 1;  /* call our keyframe named fadeIn, use animattion ease-in and repeat it only 1 time */\n        -moz-animation:slideIn ease-in 1;\n        animation:slideIn ease-in 1;\n\n        -webkit-animation-fill-mode:forwards;  /* this makes sure that after animation is done we remain at the last keyframe value (opacity: 1)*/\n        -moz-animation-fill-mode:forwards;\n        animation-fill-mode:forwards;\n\n        -webkit-animation-duration:1s;\n        -moz-animation-duration:1s;\n        animation-duration:1s;\n\n        -webkit-backface-visibility: hidden;\n        -webkit-transform: translateZ(0) scale(1.0, 1.0);\n    }\n\n    .fade-in {\n        opacity:0;  /* make things invisible upon start */\n        -webkit-animation:fadeIn ease-in 1;  /* call our keyframe named fadeIn, use animattion ease-in and repeat it only 1 time */\n        -moz-animation:fadeIn ease-in 1;\n        animation:fadeIn ease-in 1;\n\n        -webkit-animation-fill-mode:forwards;  /* this makes sure that after animation is done we remain at the last keyframe value (opacity: 1)*/\n        -moz-animation-fill-mode:forwards;\n        animation-fill-mode:forwards;\n\n        -webkit-animation-duration:1s;\n        -moz-animation-duration:1s;\n        animation-duration:1s;\n\n        -webkit-backface-visibility: hidden;\n        -webkit-transform: translateZ(0) scale(1.0, 1.0);\n    }\n\n    .zero {\n        -webkit-animation-delay: 0.1s;\n        -moz-animation-delay: 0.1s;\n        animation-delay: 0.1s;\n    }\n\n    .one {\n        -webkit-animation-delay: 0.3s;\n        -moz-animation-delay: 0.3s;\n        animation-delay: 0.3s;\n    }\n\n    .two {\n        -webkit-animation-delay: .7s;\n        -moz-animation-delay:.7s;\n        animation-delay: .7s;\n    }\n\n    .three {\n        -webkit-animation-delay: 1.2s;\n        -moz-animation-delay: 1.2s;\n        animation-delay: 1.2s;\n\n    }\n\n    .four {\n        -webkit-animation-delay: 1.6s;\n        -moz-animation-delay: 1.6s;\n        animation-delay: 1.6s;\n    }\n    .five {\n        -webkit-animation-delay: 2s;\n        -moz-animation-delay: 2s;\n        animation-delay: 2s;\n    }\n    .hidden{\n        display: none;\n    }\n    #overlay_container  {\n        top: 0%;\n    }\n    #logo img {\n        width: 100%;\n        height: auto;\n    }\n    img#description  {\n        height: auto;\n        width: 45%;\n    }\n    #logo img#learnmore  {\n        width: 40%;\n        height: auto;\n        z-index: 3;\n    }\n\n    #container_hotspot  {\n        width:100%;\n        height:100%;\n        position:absolute;\n    }\n\n    #bg  {\n        width:100%;\n        height:100%;\n        position:absolute;\n    }\n\n    #top-wrapper  {\n        width: 100%;\n        position:relative;\n    }\n\n    #logo  {\n        /*margin-top: 6%;*/\n    }\n    @media all and (orientation:portrait) {\n        /* Styles for Portrait screen */\n\n    }\n    @media all and (orientation:landscape) {\n        #page1_video_status{\n            bottom:0;\n        }\n        #video_container {\n            /*top: 17%;*/\n            width: 100%;\n            height: auto;\n            z-index: 2;\n        }\n        #primary_ad_video{\n            width: 50%;\n        }\n        #logo img {\n            width: 100%;\n            height: auto;\n        }\n        img#description  {\n            height: auto;\n            width: 100%;\n        }\n        #logo img#learnmore  {\n            width: 50%;\n            height: auto;\n            padding-top: 1%;\n        }\n        #cta-div {\n            float:right;\n            width:45%;\n            position:relative;\n            margin-top: 4%;\n            margin-right: 5%;\n        }\n\n        #logo {\n            margin-top: 1%;\n            float:left;\n            position:relative;\n            width:45%;\n        }\n\n\n    }\n\n</style>\n<div id=\"ad_container_wrapper\">\n    <div id=\"bg\"></div>\n\n    <div id=\"top-wrapper\">\n        <div id=\"logo\">\n            <img src=\"https://ct.tubemogul.com/web/contrave_1H_2017_Q1_pho_extender/03/images/logo.png\" class=\"fade-in zero\"/>\n        </div>\n\n        <div id=\"cta-div\">\n            <img src=\"https://ct.tubemogul.com/web/contrave_1H_2017_Q1_pho_extender/03/images/cta.png\" id=\"description\" class=\"fade-in one\"/>\n        </div>\n    </div>\n\n    <div id=\"video_container\" class=\"fade-in two\">\n        <div id=\"overlay_container\"  class=\"cta slide-in three\">\n            <a id=\"callToExtend\"><img id=\"callToActionDivcallToActionDiv\"\n                                      src=\"https://ct.tubemogul.com/web/contrave_1H_2017_Q1_pho_extender/03/images/cta2.png\"\n                                      /></a>\n        </div>\n        <video id=\"primary_ad_video\"\n               webkit-playsinline\n               src=\"https://ct.tubemogul.com/web/contrave_1H_2017_Q1_pho_extender/03/XORE0003000H_VIMEO.mp4\"></video>\n\n        <div id=\"page1_video_status\" class=\"fade-in five\">\n            <div id=\"page1_video_status_text\" class=\"video_status_text\">Ad will end in </div>\n        </div>\n    </div>\n\n\n    <div id=\"container\" class=\"container fade-in four\">\n        <h3>Important Safety Information</h3>\n        <p>One of the ingredients in CONTRAVE, bupropion, may increase the risk of suicidal thinking in children, adolescents, and young adults. CONTRAVE patients should be monitored for suicidal thoughts and behaviors.  In patients taking bupropion for smoking cessation, serious neuropsychiatric events have been reported.  CONTRAVE is not approved for use in children under the age of 18.</p>\n        <p>Stop taking CONTRAVE and call a healthcare provider right away if you have any of the following symptoms, especially if they are new, worse, or worry you: thoughts about suicide or dying; attempts to commit suicide; depression; anxiety; feeling agitated or restless; panic attacks; trouble sleeping (insomnia); irritability; aggression, anger, or violence; acting on dangerous impulses; an extreme increase in activity and talking (mania); other unusual changes in behavior or mood.</p>\n        <p>CON-0332- 01/2017</p>\n    </div>\n\n    <div id=\"wrapper_close\"><img src=\"https://ct.tubemogul.com/web/contrave_1H_2017_Q1_pho_extender/03/images/close.png\" border=\"0\" /></div>\n\n</div>\n\n<script type=\"text/javascript\">\n\n    var includes = [\"https://ajax.googleapis.com/ajax/libs/hammerjs/2.0.8/hammer.min.js\", \"https://code.jquery.com/jquery-3.0.0.min.js\", \"https://ct.tubemogul.com/web/contrave_1H_2017_Q1_pho_extender/03/js/creative-0.8.6-3000.js\", \"https://ct.tubemogul.com/web/adbridge/release/adbridge-0.8.2.min.js\"];\n    var count = includes.length;\n    includes.forEach( function( entry ) {\n        var script = document.createElement('script');\n        script.setAttribute('async', 'true');\n        script.setAttribute('src', entry);\n        script.onload = function() {\n            if(--count == 0) {\n                var adBridge_tm = new AdBridge_TM();\n                var creative_tm = new Creative_TM(adBridge_tm);\n            }\n        };\n        document.body.appendChild(script);\n    });\n\n</script>","autoPlay":null,"showControls":null,"resourceType":"static"}],"width":"100%","action":null,"trigger":"videoend","type":"player","height":"100%"}],"statsBaseURL":"stats.tubemogul.com/stats/1","displayType":"mraid_3rd_party","adId":"oLIZoV4gZH17QwQLWW5h","pixels":[{"id":"751156","trigger":"Impression","detail":"https://rtd.tubemogul.com/upi/?sid=0TQkefTF09lBnQfFHhkf${DID}","type":"Flash","detail_ssl":"https://rtd.tubemogul.com/upi/?sid=0TQkefTF09lBnQfFHhkf${DID}"},{"id":"751972","trigger":"Impression","detail":"https://ad.atdmt.com/i/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}","type":"Flash","detail_ssl":"https://ad.atdmt.com/i/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}"},{"id":"751973","trigger":"ClickThrough","detail":"https://ad.atdmt.com/c/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};cache=${TM_RANDOM};qpb=1;?h=?site_url=${TM_SITE_NAME}","type":"Flash","detail_ssl":"https://ad.atdmt.com/c/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};cache=${TM_RANDOM};qpb=1;?h=?site_url=${TM_SITE_NAME}"},{"id":"751974","trigger":"Complete25","detail":"https://ad.atdmt.com/e/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};ev.t=v1_025;cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}","type":"Flash","detail_ssl":"https://ad.atdmt.com/e/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};ev.t=v1_025;cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}"},{"id":"751975","trigger":"Complete50","detail":"https://ad.atdmt.com/e/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};ev.t=v1_050;cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}","type":"Flash","detail_ssl":"https://ad.atdmt.com/e/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};ev.t=v1_050;cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}"},{"id":"751976","trigger":"Complete75","detail":"https://ad.atdmt.com/e/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};ev.t=v1_075;cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}","type":"Flash","detail_ssl":"https://ad.atdmt.com/e/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};ev.t=v1_075;cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}"},{"id":"751977","trigger":"Completion","detail":"https://ad.atdmt.com/e/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};ev.t=v1_100;cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}","type":"Flash","detail_ssl":"https://ad.atdmt.com/e/img;adv=11012205711679;c.a=${TM_CAMPAIGN_ID_NUM};s.a=tubemogul;p.a=${TM_PLACEMENT_ID_NUM};a.a=${TM_AD_ID_NUM};ec=11012205711725;idfa=${USER_ID};idfa_lat=;aaid=${USER_ID};aaid_lat=;ua=${TM_CLIENT_UA_URLENC};client_ip=${TM_CLIENT_IP};timestamp=${TM_TIMESTAMP};ev.t=v1_100;cache=${TM_RANDOM}?site_url=${TM_SITE_NAME}"},{"id":"753181","trigger":"Impression","detail":"https://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=19&mc=imp&pli=19960840&PluID=0&ord=[timestamp]&rtu=-1&pcp=$${TM_SITE_ID_NUM}$$","type":"Flash","detail_ssl":"https://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=19&mc=imp&pli=19960840&PluID=0&ord=[timestamp]&rtu=-1&pcp=$${TM_SITE_ID_NUM}$$"}],"feedId":"oLIZoV4gZH17QwQLWW5h","adClass":"mobile_app_inter","price":"","paId":"oLIZoV4gZH17QwQLWW5h","width":320,"assetBaseURL":"//playtime.tubemogul.com","wmode":"window","height":480}];var tm_auction_id=TM_array[uIdx].Args.data[0].session.sessId;TM_array[tm_auction_id]=TM_array[uIdx];delete TM_array[uIdx];TM_array[tm_auction_id].Feed=TM_array[tm_auction_id].Args.data[0];(function(){var b=false,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.JRClass=function(){};JRClass.extend=function(i){var h=this.prototype;b=true;var g=new this();b=false;for(var f in i){g[f]=typeof i[f]=="function"&&typeof h[f]=="function"&&c.test(i[f])?(function(j,k){return function(){var m=this._super;this._super=h[j];var l=k.apply(this,arguments);this._super=m;return l}})(f,i[f]):i[f]}function d(){if(!b&&this.init){this.init.apply(this,arguments)}}d.prototype=g;d.constructor=d;d.extend=arguments.callee;return d}})();TM_array[tm_auction_id].Util=function(TM){var isNull=function(obj){return typeof(obj)=="undefined"||!obj||obj==""},setDefault=function(val,def){return(isNull(val)?def:val)},isEmpty=function(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false}}return true},flashDetect=function(){var osf,osfd,i,axo=1,v=0,nv=navigator;if(nv.plugins&&nv.mimeTypes.length){osf=nv.plugins["Shockwave Flash"];if(osf&&osf.description){osfd=osf.description;v=parseInt(osfd.substring(osfd.indexOf(".")-2))}}else{try{for(i=5;axo!=null;i++){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);v=i}}catch(e){}}return v},detectMraid=function(cnt,successCallback,timeoutCallback){var cnt=cnt||1,maxCnt=1000,next=null;if(typeof mraid!=="undefined"){tm_log("detectMraid() . mraid defined on try :"+cnt);next=successCallback}else{if(cnt>maxCnt){next=timeoutCallback;tm_log("detectMraid() . timed-out on try :"+cnt)}else{tm_log("detectMraid() . mraid undefined on try : "+cnt);setTimeout(detectMraid.bind(this,cnt+1,successCallback,timeoutCallback),20)}}if(!!next){tm_log("detectMraid() . calling next() :");next()}},initializeWinplay=function(tm_auction_id){TM_Obj=TM_array[tm_auction_id];var promotedVideoJson,H,i;for(H=0;H<TM_Obj.Feed.adParts.length;H++){if(TM_Obj.Feed.adParts[H].type=="player"){playerAdPartSequence=H;for(i=0;i<TM_Obj.Feed.adParts[H].assets.length;i++){if(TM_Obj.Feed.adParts[H].assets[i]["type"]=="promoted_video"){promotedVideoJson=TM_Obj.Feed.adParts[H].assets[i];break}}}}TM_Obj.winplayInfo={};TM_Obj.winplayInfo.paId=TM_Obj.Feed.paId;TM_Obj.winplayInfo.psId=TM_Obj.Feed.psId;TM_Obj.winplayInfo.bi=TM_Obj.Feed.bi;TM_Obj.winplayInfo.pt=TM_Obj.Feed.pt||"view";TM_Obj.winplayInfo.price=TM_Obj.Feed.price;TM_Obj.winplayInfo.adEngagementViewQP=TM_Obj.Feed.adEngViewQP;TM_Obj.winplayInfo.adEngagementClickThruQP=TM_Obj.Feed.adEngClickThruQP;TM_Obj.winplayInfo.statsBaseURL=TM_Obj.Feed.statsBaseURL;TM_Obj.winplayInfo.autoplay=(!!promotedVideoJson&&promotedVideoJson.autoPlay);if(!!TM_Obj.Feed.tagParams){TM_Obj.winplayInfo.clickThroughUrlPrefix=TM_Obj.Feed.tagParams.clickthroughurlprefix}TM_Obj.winplayInfo.burl=TM_Obj.Util.getBurl();TM_Obj.winplayInfo.sessId=TM_Obj.winplayInfo.playerInstanceId?TM_Obj.winplayInfo.playerInstanceId:"preview";TM_Obj.winplayInfo.pixels=TM_Obj.Feed.pixels;TM_Obj.adTracker=TM_Obj.PlaytimeAnalytics.newAdTracker(TM_Obj.winplayInfo);TM_Obj.currentVideoTracker=TM_Obj.adTracker.newVideoTracker({pvId:TM_Obj.winplayInfo.pvId,autoplay:TM_Obj.winplayInfo.autoplay,duration:15,volume:0.5,playheadTime:0})},random=function(){return parseInt(Math.random()*99999999)},loadImage=function(src,onload){var img=new Image();if(!!onload){img.onload=onload}img.src=src;return img},loadScript=function(src,callback){var js=document.createElement("script");js.type="text/javascript";if(!!callback){js.onload=callback;js.onerror=callback}js.src=src;document.getElementsByTagName("head")[0].appendChild(js)},loadCSS=function(src,callback){var css=document.createElement("link");css.rel="text/css";css.src=src;if(!!callback){css.onload=callback}document.getElementsByTagName("head")[0].appendChild(css)},appendHTML=function(html){var d=document.createElement("div");d.innerHTML=html;document.body.appendChild(d)},writeHTML=function(divid,str){var wroteDiv=false,i,type=TM.Feed.displayType,adcontent,condition="tubemogul.",scripts=document.getElementsByTagName("script");if(type!="mraid_3rd_party"&&type!="inbanner_3rd_party"){if(
/*@cc_on!@*/
true){for(i=0;i<scripts.length;i++){if(scripts[i].src.indexOf(condition)>0){adcontent=document.createElement("div");adcontent.id=divid;adcontent.innerHTML=str;if(scripts[i].parentNode.tagName!="HEAD"){scripts[i].parentNode.insertBefore(adcontent,scripts[i]);wroteDiv=true;break}}}}}if(!wroteDiv){adcontent=document.createElement("div");adcontent.id=divid;adcontent.innerHTML=str;adcontent.style.width=TM.Feed.width+"px";adcontent.style.height=TM.Feed.height+"px";document.body.appendChild(adcontent);TM.Util.executeScripts(adcontent.getElementsByTagName("script"));document.body.style.margin="0px"}},findInArray=function(list,field,value){if(!list||!field){return}for(var i=0;i<list.length;i++){if(list[i][field]==value){return list[i]}}return null},openClickThrough=function(clickThroughUrl){firePixels("ClickThrough");window.open(clickThroughUrl)},firePixels=function(trigger){for(var pix=TM.Feed.pixels.length-1;pix>=0;pix--){if(!TM.Feed.pixels[pix]||TM.Feed.pixels[pix].trigger.toLowerCase()!=trigger.toLowerCase()){continue}if(TM.Util.firePixel(trigger,TM.Feed.pixels[pix].type,TM.Feed.pixels[pix].detail,TM.Feed.pixels[pix].id)){delete TM.Feed.pixels[pix]}}if(trigger=="Impression"&&String(TM.Feed.vtrusted).toLowerCase()=="t"){if(TM.Feed.adClass=="display_app_inter"){TM.Util.fireVimpAfter(1000)}else{if(TM.Feed.displayType=="mraid_3rd_party"&&TM.Feed.adClass=="mobile_app_inter"){TM.Util.fireVimpAfter(2000)}}}},firePixel=function(trigger,type,src,id){var success=false,now,delta;src=src.replace("[[random]]",TM.Util.random());src=src.replace("[[timestamp]]",(new Date()).getTime());src=src.replace("[timestamp]",(new Date()).getTime());if(trigger.indexOf("TM_AUDIT")==0){if(type.toLowerCase().indexOf("mobile")!=0){success=true;trigger=null}else{now=Number(new Date());delta=now-Number(TM.lc_params.zerotime);src+=src.indexOf("?")>0?"&":"?";src+=trigger.toLowerCase().substring(trigger.lastIndexOf("_")+1,trigger.length)+"_delta="+delta.toString();src+="&ad_type="+TM.Util.auditAdClass;TM.lc_params.zerotime=now}}switch(type){case"Flash":case"Image":TM.Util.loadImage(src);success=true;break;case"HTML":TM.Util.appendHTML(src);success=true;break;case"Javascript":TM.Util.loadScript(src);success=true;break;default:break}logPixel(id,trigger,src,type);return success},updateProtocol=function(){TM.lc_params.proto=document.location.protocol;if(TM.lc_params.proto!="https:"){TM.lc_params.proto="http:"}if(TM.lc_params.proto=="https:"){setProtoInObject(TM.Feed)}},setProtoInObject=function(jsonObj){var pix,assetIdx,adPartIdx;if(jsonObj.pixels){for(pix=jsonObj.pixels.length-1;pix>=0;pix--){try{if(jsonObj.pixels[pix].id=="TM_PI5"){jsonObj.pixels[pix].detail=jsonObj.pixels[pix].detail.replace("http://b","https://sb")}else{if(jsonObj.pixels[pix].id.toString().substr(0,3)=="TM_"){jsonObj.pixels[pix].detail=jsonObj.pixels[pix].detail.replace("http://","https://")}}}catch(e){}}}if(jsonObj.assets){for(assetIdx=0;assetIdx<jsonObj.assets.length;assetIdx++){jsonObj.assets[assetIdx].detail=jsonObj.assets[assetIdx].detail.replace("http://","https://");setProtoInObject(jsonObj.assets[assetIdx])}}else{if(jsonObj.adParts){for(adPartIdx=0;adPartIdx<jsonObj.adParts.length;adPartIdx++){setProtoInObject(jsonObj.adParts[adPartIdx])}}}},c=5,logPixel=function(id,trigger,src,type){try{if(!TM.Util.isNull(id)&&trigger.indexOf("TM_AUDIT")!=0&&trigger.indexOf("TM_PI")!=0){if(pixel!==undefined){pixel.send(id,src,trigger,type)}if(typeof(PromoAdmin)!="undefined"){PromoAdmin.MediaPlacement.Test.firePixel(trigger.toLowerCase(),src)}}}catch(e){}if(id=="TM_PI5"){setTimeout(function(){if(--c>0){firePixel(trigger,type,src,id)}},parseInt(Math.random()*5+5)*1000)}},isThisYouTube=function(adParts){var n,i;for(n=0;n<adParts.length;n++){for(i=0;i<adParts[n].assets.length;i++){if(adParts[n].assets[i].mimeType.toLowerCase()=="youtube"){return true}}}return false},getBurl=function(){var burl="Unknown",burlHalves;try{burl=window.location.href.toString();if(burl.indexOf("facebook.com/")>-1){burlHalves=burl.split("?");burl=burlHalves[0]+"---REDACTED_FOR_PRIVACY---"}}catch(error){}return burl},getAssetsInAdPartsByType=function(adPartType,assetType){var assetObjNodes=[],H,i;for(H=0;H<TM.Feed.adParts.length;H++){if(TM.Feed.adParts[H].type==adPartType){for(i=0;i<TM.Feed.adParts[H].assets.length;i++){if(TM.Feed.adParts[H].assets[i]["type"]==assetType){assetObjNodes.push(TM.Feed.adParts[H].assets[i])}}}}return assetObjNodes},mimeTypeClass=function(assetObj){if(!!assetObj.mimeType){return assetObj.mimeType.split("/")[0]}return null},assetsIncludeFlash=function(){var H,i,hasFlash=false;for(H=0;H<TM.Feed.adParts.length&&hasFlash==false;H++){for(i=0;i<TM.Feed.adParts[H].assets.length&&hasFlash==false;i++){hasFlash=((!!TM.Feed.adParts[H].assets[i]["detail"]&&TM.Feed.adParts[H].assets[i]["detail"].indexOf(".swf")>-1)||TM.Feed.adParts[H].assets[i]["mimeType"]=="application/x-shockwave-flash")}}return hasFlash},receiveMessage=function(func){var eventMethod=window.addEventListener?"addEventListener":"attachEvent";var windowAddListener=window[eventMethod];var messageEvent=(eventMethod=="attachEvent")?"onmessage":"message";windowAddListener(messageEvent,func)},auditAdClass=(TM.Feed.adClass.toLowerCase()=="bap")?"bap":"ctp"+(isThisYouTube(TM.Feed.adParts))?"-yt-":"-tm-"+(TM.Feed.displayType.toLowerCase().indexOf("flash")>0)?"flash":"html5",fixProto=function(url){return url.replace(/(http:|https:|)\/\//,TM.lc_params.proto+"//")},executeScripts=function(scripts,success,error){var i,scripts=Array.prototype.slice.call(scripts),head,remaining,node,handler,evalScript,callbacks;if(!scripts.length){return}callbacks={success:success,error:error||success};remaining=scripts.length;head=document.getElementsByTagName("head")[0]||document.documentElement;node=function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()};handler=function(type){remaining--;if(remaining===0&&typeof callbacks[type]==="function"){callbacks[type]()}};evalScript=function(elem){var script=document.createElement("script"),data=(elem.text||elem.textContent||elem.innerHTML||"");if(elem.src){script.src=elem.src}else{try{script.appendChild(document.createTextNode(data))}catch(e){script.text=data}}head.appendChild(script);if(elem.src){script.onload=handler("success");script.onerror=handler("error")}else{handler("success")}head.removeChild(script)};for(i=0;scripts[i];i++){var script=scripts[i];if(script.parentNode){script.parentNode.removeChild(script)}evalScript(scripts[i])}},allowDocumentWrite=function(){var feed=TM.Feed,isAndroid=navigator.userAgent.match(/Android/i),inMobiMraid=window.imraid,is3rdParty=(feed.displayType in {inbanner_3rd_party:1,mraid_3rd_party:1}),androidSupportedClass=(feed.adClass in {mobile_app_inter:1,tablet_app_inter:1,display_app_inter:1});return((is3rdParty&&!inMobiMraid)||(isAndroid&&androidSupportedClass))},trusteIconExists=function(container){container=container||document.body;return !!container.querySelector("span#te-clearads-js-truste01cont1")},convertStringToHTML=function(str){var elem=document.createElement("div");elem.innerHTML=str;return elem.firstElementChild},loadMraidTruste=function(container,mraidContainer){var truste,html=TM.Partners.getTrusteHtml(),container=container||document.body;if(!trusteIconExists(container)&&html){truste=convertStringToHTML(html);if(mraidContainer){container.insertBefore(truste,mraidContainer)}else{document.body.appendChild(truste)}executeScripts(truste.getElementsByTagName("script"),function(){console.log("loadMraidTruste:: Ad choices loaded on ad container ("+TM.Feed.width+"x"+TM.Feed.height+")")})}},fireVimpAfter=function(delay){this.mraidViewabilityTimeout=setTimeout(function(){var params={vinst:"t",vwbl:"t",vpct:"100",awin:"t"};TM.Embed.addQParams(params);var url=TM.Embed.buildStatsUrl("vimp",params);TM.Util.loadImage(url)},delay);mraid.addEventListener("viewableChange",function(){clearTimeout(this.mraidViewabilityTimeout)}.bind(this))},initMraid3pTruste=function(){var mraidContainer=TM.mraid.container.domRef;if(mraidContainer&&TM.Feed.displayType==="mraid_3rd_party"){container=mraidContainer.parentNode;loadMraidTruste(container,mraidContainer)}};return{fixProto:fixProto,isNull:isNull,setDefault:setDefault,isEmpty:isEmpty,flashDetect:flashDetect,detectMraid:detectMraid,initializeWinplay:initializeWinplay,random:random,loadImage:loadImage,loadScript:loadScript,loadCSS:loadCSS,appendHTML:appendHTML,writeHTML:writeHTML,findInArray:findInArray,openClickThrough:openClickThrough,firePixels:firePixels,firePixel:firePixel,logPixel:logPixel,fireVimpAfter:fireVimpAfter,updateProtocol:updateProtocol,getBurl:getBurl,assetsIncludeFlash:assetsIncludeFlash,getAssetsInAdPartsByType:getAssetsInAdPartsByType,mimeTypeClass:mimeTypeClass,receiveMessage:receiveMessage,executeScripts:executeScripts,allowDocumentWrite:allowDocumentWrite,loadMraidTruste:loadMraidTruste,initMraid3pTruste:initMraid3pTruste}}(TM_array[tm_auction_id]);TM_array[tm_auction_id].Partners=function(b){getTrusteScriptUrl=function(){if(!b.Feed.bt&&!b.lc_params.bt){return""}return b.lc_params.proto+"//choices.truste.com/ca?pid=tubemogul01&aid=tubemogul01&cid=0811tm300x250&c=truste01cont1&w="+b.Feed.width+"&h="+b.Feed.height+"&plc=tl&js=10"},getTrusteHtml=function(c){tm_log("Feed bt: "+b.Feed.bt);tm_log("lcparams bt: "+b.lc_params.bt);if(trusteAdded||!getTrusteScriptUrl()){return""}trusteAdded=true;var d="<script>navigator.mimeTypes['application/x-shockwave-flash']=null;navigator.plugins['Shockwave Flash']=null;<\/script>";return(!c?d:"")+'<span id="te-clearads-js-truste01cont1"><script type="text/javascript" src="'+getTrusteScriptUrl()+'"><\/script></span>'};return{getTrusteScriptUrl:getTrusteScriptUrl,getTrusteHtml:getTrusteHtml}}(TM_array[tm_auction_id]);TM_array[tm_auction_id].Embed=function(tm_auction_id){var QUARTILE_NAMES=["Complete25","Complete50","Complete75","Completion"],player,promoted_video,TM=TM_array[tm_auction_id],divId=tm_auction_id.replace(/[^a-zA-Z0-9]/g,"_"),getDivId=function(){return"TM_PlacementDiv_"+divId},get3pDisplayCode=function(adPart){var i;for(i=0;i<adPart.assets.length;i++){if(adPart.assets[i]["type"]=="display_code"){return adPart.assets[i].detail}}},getEmbedStr=function(){if(TM.Util.isNull(TM.Feed)||TM.Util.isEmpty(TM.Feed)){return null}var embed;player=TM.Util.findInArray(TM.Feed.adParts,"type","player");if(player==null){player=TM.Util.findInArray(TM.Feed.adParts,"type","expand")}if(player==null){player=TM.Util.findInArray(TM.Feed.adParts,"type","display")}if(!TM.Util.isNull(player)&&TM.Util.findInArray(player.assets,"type","promoted_video")!=null){promoted_video=TM.Util.findInArray(player.assets,"type","promoted_video")}if(!TM.Util.isNull(promoted_video)&&!TM.Util.isNull(promoted_video.clickURL)&&!TM.Util.isNull(TM.lc_params.bannerclickurl)){promoted_video.clickURL=TM.lc_params.bannerclickurl+encodeURIComponent(promoted_video.clickURL)}if(TM.Feed.displayType=="HTML5"&&!document.createElement("video").canPlayType){TM.Feed.displayType="New Flash"}if(TM.Feed.bt){TM.Feed.wmode="opaque"}switch(TM.Feed.displayType){case"New Flash":case"instream":var flash_version=TM.Util.flashDetect();if(flash_version<9){embed=getFallbackEmbed()}else{embed=getNewFlashEmbed()}break;case"mraid_3rd_party":embed=mraidProxyEmbed(TM.Embed.get3pDisplayCode(player));break;case"HTML5":TM.Feed.rt="HTML5";embed=getHTML5Embed();break;default:break}if(TM.Util.isNull(embed)){embed=getErrorEmbed()}return embed},getNewFlashEmbed=function(){var str="",isIE=
/*@cc_on!@*/
false;if(isIE){str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="TMFlashUnit" name="TMFlashUnit" width="'+TM.Feed.width+'" height="'+TM.Feed.height+'" ><param name="movie" value="'+TM.lc_params.adpluginurl+'" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="'+TM.Feed.wmode+'" /><param name="auditAdClass" value="'+TM.Util.auditAdClass+'" /><param name="sessId" value="'+TM.Feed.session.sessId+'" /><param name="flashvars" value="zeroTime='+TM.lc_params.zerotime+'" /></object>'}else{str='<embed id="TMFlashUnit" name="TMFlashUnit" width="'+TM.Feed.width+'" height="'+TM.Feed.height+'" src="'+TM.lc_params.adpluginurl+"?zeroTime="+TM.lc_params.zerotime+"&auditAdClass="+TM.Util.auditAdClass+"&sessId="+TM.Feed.session.sessId+'" type="application/x-shockwave-flash" wmode="'+TM.Feed.wmode+'" allowscriptaccess="always" allowfullscreen="true" />'}str+=TM.Partners.getTrusteHtml(true);return str},mraidProxyEmbed=function(displayCode){TM.mraid={proxy:{},container:{}};if(TM.Feed.adClass=="mobile_app_inter"){TM.MraidVpaid=function(vpaidObj){var vpaidObject=vpaidObj,adStarted=false;var vpaidEvents={AdStarted:function(){adStarted=true;tm_log("Receiving event : AdStarted");TM.Util.initMraid3pTruste()},AdImpression:function(){tm_log("Receiving event : AdImpression (imp already fired by Ad Server Template)")},AdVideoStart:function(){sendView();var dur=vpaidObject.getAdDuration();if(TM.Util.isNull(dur)){dur=30}dur=Math.floor(dur);buildQuartilePixels(dur);tm_log("Receiving event : AdVideoStart")},AdVideoFirstQuartile:function(){sendQuartile(1);tm_log("Receiving event : AdVideoFirstQuartile")},AdVideoMidpoint:function(){sendQuartile(2);tm_log("Receiving event : AdVideoMidpoint")},AdVideoThirdQuartile:function(){sendQuartile(3);tm_log("Receiving event : AdVideoThirdQuartile")},AdVideoComplete:function(){sendQuartile(4);tm_log("Receiving event : AdVideoComplete")},AdClickThru:function(){tm_log("Receiving event : AdClickThru")},AdInteraction:function(){tm_log("Receiving event : AdInteraction")},AdDurationChanged:function(){tm_log("Receiving event : AdDurationChanged")},AdUserAcceptInvitation:function(){tm_log("Receiving event : AdUserAcceptInvitation")},AdUserMinimize:function(){tm_log("Receiving event : AdUserMinimize")},AdUserClose:function(){tm_log("Receiving event : AdUserClose")},AdPaused:function(){tm_log("Receiving event : AdPaused")},AdPlaying:function(){tm_log("Receiving event : AdPlaying")},AdLog:function(){tm_log("Receiving event : AdLog")},AdError:function(){tm_log("Receiving event : AdError")}},sendView=function(){tm_log("VPAID view");TM.currentVideoTracker.streamUpdate((0.1),0.5)},sendQuartile=function(q){tm_log("Sending Quartile: "+q);TM.Util.firePixels(QUARTILE_NAMES[q-1])},startAdWhenViewable=function(){if(!adStarted&&mraid.isViewable()){adStarted=true;vpaidObject.startAd()}};for(event in vpaidEvents){vpaidObject.subscribe(vpaidEvents[event],event)}if(TM.mraid.container.supports("vpaid")){tm_log("VPAID Container : calling container.initVpaid(vpaidObject)");TM.mraid.container.initVpaid(vpaidObject)}else{if(mraid.isViewable()){tm_log("Non VPAID Container : already viewable. Calling vpaidObject.startAd()");setTimeout(function(){vpaidObject.startAd()},100)}else{tm_log("Non VPAID Container : change to viewable. Calling vpaidObject.startAd()");mraid.addEventListener("viewableChange",startAdWhenViewable)}}}}var mraidVpaid,impressionSent=false,sendImpression=function(){if(impressionSent){return}if(TM.Util.isNull(TM.lc_params.impurl)){TM.Util.firePixel("Impression","Image",TM.Embed.getImpURL(),"TM_IMPRESSION")}TM.Util.firePixels("Impression");impressionSent=true},setupImpression=function(){if(mraid.isViewable()){sendImpression()}else{mraid.addEventListener("viewableChange",sendImpression)}},proxyMraidProperty=function(property){TM.mraid.container[property]=mraid[property];mraid[property]=TM.mraid.proxy[property]},setupMraidProxy=function(){var default3pCloseButtonTimeout=4000;var closeButtonTimeout=null;var closeButtonTimeoutDelay=TM.Feed.closeButtonDelay||default3pCloseButtonTimeout;TM.mraid.proxy={useCustomClose:function(state){if(closeButtonTimeout!==null){clearTimeout(closeButtonTimeout);closeButtonTimeout=null}TM.mraid.container.useCustomClose(state)},supports:function(feature){tm_log("3rd party ad asking: ... supports('"+feature+"')");switch(feature){case"vpaid":proxyMraidProperty("initVpaid");return true;break;default:return TM.mraid.container.supports(feature);break}},open:function(clickURL){if(arguments[1]!="tm_doNotTrack"&&TM.Feed.adClass!="display_app_inter"){TM.currentVideoTracker.userAction("ct",TM.winplayInfo)}return TM.mraid.container.open(clickURL)},initVpaid:function(vpaidObject){tm_log("3rd party ad calling initVpaid()");if(typeof TM.MraidVpaid==="function"){mraidVpaid=new TM.MraidVpaid(vpaidObject)}},isViewable:function(){TM.Util.initMraid3pTruste();return TM.mraid.container.isViewable()}};proxyMraidProperty("useCustomClose");proxyMraidProperty("supports");proxyMraidProperty("isViewable");proxyMraidProperty("open");closeButtonTimeout=setTimeout(function(){TM.mraid.container.useCustomClose(false)},closeButtonTimeoutDelay)},handleMraidDetected=function(){if(mraid.getState()=="default"){handleMraidReady()}else{mraid.addEventListener("ready",handleMraidReady)}},handleMraidDetectTimeout=function(){},handleMraidReady=function(){mraid.useCustomClose(true);TM.Util.loadScript(TM.Feed.tagParams.assetbase+"/mobile/js/winplay-core.js",handleWinplayReady)},handleWinplayReady=function(){TM.Util.initializeWinplay(tm_auction_id);setupMraidProxy();embed3pMraidAd();setupImpression()},embed3pMraidAd=function(){var embed3pMraidTag,fireWindowOnload;if(TM.Util.allowDocumentWrite()){document.write("<div id='"+TM.Embed.getDivId()+"'>"+displayCode+"</div>");document.close()}else{fireWindowOnload=function(){var evt=document.createEvent("Event");evt.initEvent("load",false,false);window.dispatchEvent(evt)};embed3pMraidTag=document.createElement("div");embed3pMraidTag.id=TM.Embed.getDivId();embed3pMraidTag.innerHTML=displayCode;document.body.appendChild(embed3pMraidTag);TM.Util.executeScripts(embed3pMraidTag.getElementsByTagName("script"),fireWindowOnload);if(!TM.mraid.container.domRef){TM.mraid.container.domRef=embed3pMraidTag}}};try{TM.Util.detectMraid(1,handleMraidDetected,handleMraidDetectTimeout);embed="async"}catch(err){embed=displayCode}return embed},getHTML5Embed=function(){var ret={},adParts={},j,type,str;TM.Util.loadScript(TM.lc_params.adpluginurl+"?sessId="+TM.Feed.session.sessId,function(){new HTML5AdUnit(TM.Feed)});for(j=0;j<TM.Feed.adParts.length;j++){type=TM.Feed.adParts[j].type;ret[type]=TM.Feed.adParts[j]}adParts=ret;str="<div id='tm-video-container' style='width:"+TM.Feed.width+"px;height:"+TM.Feed.height+"px;'>";str+="<video id='tm-video-space'></video></div>"+TM.Partners.getTrusteHtml();return str},getFallbackEmbed=function(){var fallbackEmbed,fallbackNodes=TM.Util.getAssetsInAdPartsByType("fallback","banner"),fallbackNode;if(fallbackNodes.length>0){fallbackNode=fallbackNodes[0];var ctUrl="",imgString='<img width="'+fallbackNode.width+'" height="'+fallbackNode.height+'" src="'+fallbackNode.detail+'"/>';if(!TM.Util.isNull(fallbackNode.clickURL)){if(!TM.Util.isNull(TM.lc_params.bannerclickurl)){fallbackNode.clickURL=TM.lc_params.bannerclickurl+encodeURIComponent(fallbackNode.clickURL)}var params={sId:0,sessId:TM.Feed.session.sessId,paId:TM.Feed.paId,rt:"HTML5",w:fallbackNode.width,h:fallbackNode.height,redir:fallbackNode.clickURL};ctUrl=buildStatsUrl("ct",params)}if(ctUrl==""){fallbackEmbed=imgString}else{fallbackEmbed="<a href=\"javascript:TM_array['"+tm_auction_id+"'].Util.openClickThrough('"+ctUrl+'\')" target="_new">'+imgString+"</a>"}}else{fallbackEmbed=getErrorEmbed()}return fallbackEmbed},getErrorEmbed=function(){return'<a href="http://www.tubemogul.com" target="_new"><img width="'+TM.Feed.width+'" height="'+TM.Feed.height+'" src="'+TM.lc_params.assetbase+'/adtags/no_javascript.jpg" /></a>'},addQParams=function(params,stat){params.sessId=TM.Feed.session.sessId;params.paId=TM.Feed.paId;params.psId=TM.Feed.psId;params.rt=TM.Feed.rt;params.did=TM.Feed.did;params.didtype=TM.Feed.didtype;params.burl=TM.Util.getBurl();if(stat=="v/imp"){params.w=TM.Feed.width;params.h=TM.Feed.height;if(TM.Feed.vtrusted&&String(TM.Feed.vtrusted).toLowerCase()=="t"){params.vinst="t"}}else{if(stat==="ct"){params.bi=TM.Feed.bi;params.adEngClickThruQP=TM.Feed.adEngClickThruQP;params.adEngViewQP=TM.Feed.adEngViewQP}}},buildQuartilePixels=function(duration){var qUrl,params={};addQParams(params);params.dur=duration;if(TM.Feed.vtrusted&&String(TM.Feed.vtrusted).toLowerCase()=="t"){params.vinst="t"}for(q=1;q<=4;q++){topic="pct"+q*25;qUrl=buildStatsUrl(topic,params);TM.Feed.pixels.push({id:"TM_QUARTILE_"+q,trigger:QUARTILE_NAMES[q-1],detail:qUrl,detail_ssl:null,type:"Image"})}},getImpURL=function(){var params={};addQParams(params,"v/imp");params.adEngImpQP=TM.Feed.adEngImpQP;if(TM.Feed.pt=="imp"){params.bi=TM.Feed.bi;params.price=TM.Feed.price}return buildStatsUrl("imp",params)},buildStatsUrl=function(topic,params){var str=TM.lc_params.statsurl+"/"+topic+"?",amp="";for(a in params){if(!TM.Util.isNull(params[a])){str+=amp+a+"="+encodeURIComponent(params[a]);amp="&"}}if(topic=="imp"&&!TM.Util.isNull(params.adEngImpQP)){str+="&"+params.adEngImpQP}if(topic=="ct"&&!TM.Util.isNull(params.adEngClickThruQP)){str+="&"+params.adEngClickThruQP}if(topic=="view"&&!TM.Util.isNull(params.adEngViewQP)){str+="&"+params.adEngViewQP}if(!TM.Util.isNull(TM.Feed.expaId)){str+="&expaId="+TM.Feed.expaId}return str},getMraidCtUrl=function(){var params={};addQParams(params,"ct");return buildStatsUrl("ct",params)},empty=function(){};return{getEmbedStr:getEmbedStr,get3pDisplayCode:get3pDisplayCode,buildStatsUrl:buildStatsUrl,addQParams:addQParams,getDivId:getDivId,getImpURL:getImpURL,getMraidCtUrl:getMraidCtUrl}}(tm_auction_id);TM_array[tm_auction_id].prepareFeeds=function(b){if(b.Util.isNull(b.lc_params)){b.lc_params={}}if(typeof tm_param_array!=="undefined"&&!b.Util.isNull(tm_param_array[b.Feed.session.sessId])){b.tm_params=tm_param_array[b.Feed.session.sessId]}if(!b.hasOwnProperty("tm_params")){if(typeof tm_params!=="undefined"&&!b.Util.isNull(tm_params)){b.tm_params=tm_params}}if(!b.hasOwnProperty("tm_params")){b.tm_params={}}for(a in b.tm_params){b.lc_params[a.toLowerCase()]=b.tm_params[a]}if(b.Util.isNull(b.lc_params.zerotime)){b.lc_params.zerotime=Number(new Date())}b.Util.updateProtocol();b.lc_params.assetbase=b.Util.setDefault(b.tm_params.assetbase,b.lc_params.proto+b.Feed.assetBaseURL);b.lc_params.statsurl=b.lc_params.proto+"//"+b.Util.setDefault(b.Feed.statsBaseURL,"stats.tubemogul.com/stats/1");b.lc_params.adpluginurl=b.Feed.adPluginURL;if(b.Feed.adPluginURL.substr(0,4)!="http"){b.lc_params.adpluginurl=b.lc_params.assetbase+b.lc_params.adpluginurl}while(!!b.lc_params.pixels&&b.lc_params.pixels.length>0){b.Feed.pixels.push(b.lc_params.pixels.pop())}b.Feed.tagParams=b.lc_params;if(b.Feed.preview){b.Feed.session.sessId="preview"}else{if(!b.Util.isNull(b.lc_params.auction_id)){b.Feed.session.sessId=b.lc_params.auction_id}}};TM_array[tm_auction_id].prepareMraidImpression=function(c,b){var d;if(c.Util.isNull(c.lc_params.impurl)){d=c.Embed.getImpURL()}else{d=c.lc_params.impurl}if(b){if(c.Feed.preview){c.Feed.vtrusted="T";if(d.indexOf("vinst")==-1){d+="&vinst=t"}}}c.Feed.pixels.push({id:"TM_IMPRESSION",trigger:"Impression",detail:d,detail_ssl:null,type:"Image"})};TM_array[tm_auction_id].prepareCloseButtonDelay=function(c){if(typeof c.Feed.closeButtonDelay!=="undefined"&&Number(c.Feed.closeButtonDelay)==c.Feed.closeButtonDelay){c.Feed.closeButtonDelay=c.Feed.closeButtonDelay*1000}else{if(typeof c.lc_params.closedelay!=="undefined"&&Number(c.lc_params.closedelay)==c.lc_params.closedelay){c.Feed.closeButtonDelay=c.lc_params.closedelay}else{var b=c.Util.getAssetsInAdPartsByType("player","promoted_video")[0];if(b&&typeof(b.videoDuration)==="number"){c.Feed.closeButtonDelay=(b.videoDuration>15)?5000:1000*b.videoDuration+1000}else{console.log("Error parsing close button delay");c.Feed.closeButtonDelay=5000}}}};TM_array[tm_auction_id].prepareAndEmbed=function(f){var d;f.prepareFeeds(f);var j=f.Feed.adClass.toLowerCase();var g;var i=function(){if(!g){if(f.Util.isNull(f.lc_params.impurl)){f.Util.firePixel("Impression","Image",f.Embed.getImpURL(),"TM_IMPRESSION")}f.Util.firePixels("Impression")}f.Util.firePixels("NOW");f.Util.firePixels("TM_AUDIT_TAG");f.Util.firePixels("tag")};var h=function(){d=f.Embed.getEmbedStr();if(d!="async"){f.Util.writeHTML(f.Embed.getDivId(),d);if(f.Partners.getTrusteScriptUrl()){f.Util.loadScript(f.Partners.getTrusteScriptUrl())}if(iasPixelUrl){f.Util.loadScript(iasPixelUrl)}if(moatPixelUrl){f.Util.loadScript(moatPixelUrl)}}};g=(j in {mobile_app_inter:1,tablet_app_inter:1,display_app_inter:1,mobile_app_ctp:1,tablet_app_ctp:1,mraid_3rd_party:1});if(g){var c=j in {mobile_app_inter:1,tablet_app_inter:1};f.prepareMraidImpression(f,c);f.prepareCloseButtonDelay(f)}if(f.Util.isNull(document.body)){window.addEventListener("load",function b(k){window.removeEventListener("load",b,false);i();h()},false)}else{i();h()}};function runMraidDisplay(){tm_log("runMraidDisplay()");var c,b;c=TM_array[tm_auction_id].Feed.adParts[0].assets[0];switch(TM_array[tm_auction_id].Util.mimeTypeClass(c)){case"image":b=new MraidDisplayImageClass(c,TM_array[tm_auction_id]);break;case"text":b=new MraidDisplayHtmlClass(c,TM_array[tm_auction_id]);break;default:tm_log("not a vaild mime-type for Mobile Display ");break}}function convertToStandardDisplay(){document.body.onclick=null;console.log("NO MRAID OBJECT FOUND! Cannot embed asset");img=new Image();img.src="//playtime.tubemogul.com/adtags/no_javascript.jpg";document.body.appendChild(img)}function go(b){if(b.Feed.adClass=="display_app_inter"&&b.Feed.displayType!=="mraid_3rd_party"){b.Util.detectMraid(1,runMraidDisplay,convertToStandardDisplay)}else{b.prepareAndEmbed(b)}}function init(){if(TM_array[tm_auction_id].Feed.click_to_run){document.body.onclick=function(){document.body.onclick=null;go(TM_array[tm_auction_id])}}else{go(TM_array[tm_auction_id])}}TM=TM_array[tm_auction_id];if(document.readyState==="complete"||(document.readyState!=="loading"&&!document.documentElement.doScroll)){init()}else{document.addEventListener("DOMContentLoaded",init)}}catch(e){console.log(e.toString());img=new Image();img.src="//playtime.tubemogul.com/adtags/no_javascript.jpg";document.body.appendChild(img)};
